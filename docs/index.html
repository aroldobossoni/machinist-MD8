<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Machinist MD8 BIOS Wiki</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #1a1a1a;
            --bg-tertiary: #2a2a2a;
            --text-primary: #e0e0e0;
            --text-secondary: #b0b0b0;
            --text-tertiary: #808080;
            --border-color: #404040;
            --accent-color: #4da6ff;
            --accent-hover: #66b3ff;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        }

        /* Tema claro */
        [data-theme="light"] {
            --bg-primary: #f5f5f5;
            --bg-secondary: #ffffff;
            --bg-tertiary: #e8e8e8;
            --text-primary: #1a1a1a;
            --text-secondary: #4a4a4a;
            --text-tertiary: #6a6a6a;
            --border-color: #d0d0d0;
            --accent-color: #0066cc;
            --accent-hover: #0052a3;
            --success-color: #1e7e34;
            --warning-color: #d39e00;
            --danger-color: #bd2130;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            padding: 2rem;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .header-content h1 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .header-content p {
            color: var(--text-secondary);
        }

        /* Theme Toggle */
        .theme-toggle {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .theme-toggle-btn {
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 0.5rem 1rem;
            color: var(--text-primary);
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .theme-toggle-btn:hover {
            background-color: var(--border-color);
        }

        .theme-toggle-btn:active {
            transform: scale(0.95);
        }

        .theme-icon {
            font-size: 1.2rem;
        }

        .donation-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-color: transparent;
            color: white;
        }

        .donation-btn:hover {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        /* Breadcrumbs */
        .breadcrumbs {
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .breadcrumbs a {
            color: var(--accent-color);
            text-decoration: none;
        }

        .breadcrumbs a:hover {
            text-decoration: underline;
        }

        .breadcrumbs .separator {
            margin: 0 0.5rem;
        }

        /* Filters */
        .filters {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .filter-group {
            flex: 1;
            min-width: 200px;
        }

        .filter-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .filter-group select,
        .filter-group input {
            width: 100%;
            padding: 0.5rem;
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        .filter-group select:focus,
        .filter-group input:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        /* Table */
        .table-wrapper {
            background-color: var(--bg-secondary);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow);
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 1000px;
            table-layout: auto; /* Permite dimensionamento din√¢mico */
        }

        thead {
            background-color: var(--bg-tertiary);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        th {
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-secondary);
            border-bottom: 2px solid var(--border-color);
            white-space: nowrap;
        }

        /* Coluna 1: Sess√£o/Op√ß√£o - ajusta ao conte√∫do */
        th:first-child {
            width: 20%;
            min-width: 200px;
        }

        /* Coluna 2: Valor Padr√£o - compacta */
        th:nth-child(2) {
            width: 1%; /* M√≠nimo poss√≠vel, expande conforme conte√∫do */
            white-space: nowrap;
        }

        /* Coluna 3: Descri√ß√£o - expande ao m√°ximo */
        th:nth-child(3) {
            width: auto; /* Pega todo espa√ßo restante */
            min-width: 300px;
        }

        /* Coluna 4: Risco - compacta */
        th:nth-child(4) {
            width: 1%; /* M√≠nimo poss√≠vel */
            white-space: nowrap;
        }

        /* Coluna 5: A√ß√µes - compacta */
        th:nth-child(5) {
            width: 1%; /* M√≠nimo poss√≠vel */
            white-space: nowrap;
        }

        tbody tr {
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.2s;
        }

        tbody tr:hover {
            background-color: var(--bg-tertiary);
        }

        tbody tr.hidden {
            display: none;
        }

        td {
            padding: 1rem;
            vertical-align: top;
        }

        /* Ajustes espec√≠ficos para c√©lulas */
        td:nth-child(2), /* Valor Padr√£o */
        td:nth-child(4), /* Risco */
        td:nth-child(5)  /* A√ß√µes */ {
            white-space: nowrap;
        }

        td:nth-child(3) { /* Descri√ß√£o */
            width: auto;
        }

        /* Menu Hierarchy */
        .menu-path {
            font-size: 0.85rem;
            color: var(--text-tertiary);
            margin-bottom: 0.25rem;
        }

        .menu-path .separator {
            margin: 0 0.25rem;
            color: var(--text-tertiary);
        }

        .option-name {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95rem;
        }

        /* Default Value */
        .default-value {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 0.85rem;
            font-family: 'Courier New', monospace;
            color: var(--accent-color);
        }

        /* Description */
        .description {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        /* Risk Badge */
        .risk-badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .risk-none {
            background-color: rgba(40, 167, 69, 0.2);
            color: var(--success-color);
        }

        .risk-low {
            background-color: rgba(255, 193, 7, 0.2);
            color: var(--warning-color);
        }

        .risk-high {
            background-color: rgba(220, 53, 69, 0.2);
            color: var(--danger-color);
        }

        .risk-reason {
            margin-top: 0.5rem;
            font-size: 0.8rem;
            color: var(--text-tertiary);
            line-height: 1.4;
            font-style: italic;
        }

        /* AI Button */
        .ai-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .ai-btn:hover {
            background-color: var(--accent-hover);
            transform: translateY(-1px);
        }

        /* Donation Modal */
        .donation-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.85);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .donation-modal.show {
            display: flex;
        }

        .donation-content {
            background-color: var(--bg-secondary);
            border-radius: 12px;
            max-width: 500px;
            max-height: 95vh;
            width: 100%;
            padding: 1.5rem;
            box-shadow: var(--shadow);
            position: relative;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .donation-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.5rem;
            cursor: pointer;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s;
        }

        .donation-close:hover {
            background-color: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .donation-header {
            text-align: center;
            margin-bottom: 1rem;
        }

        .donation-header h2 {
            font-size: 1.3rem;
            margin-bottom: 0.4rem;
        }

        .donation-header p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .donation-method {
            background-color: var(--bg-tertiary);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 0.75rem;
        }

        .donation-method h3 {
            font-size: 1rem;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .donation-method-icon {
            font-size: 1.3rem;
        }

        .donation-code {
            background-color: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 0.75rem;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            word-break: break-all;
            color: var(--accent-color);
            cursor: pointer;
            transition: all 0.2s;
        }

        .donation-code:hover {
            border-color: var(--accent-color);
            background-color: var(--bg-tertiary);
        }

        .donation-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .copy-btn {
            margin-top: 0.75rem;
            width: 100%;
            padding: 0.5rem;
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
        }

        .copy-btn:hover {
            background-color: var(--accent-hover);
        }

        .copy-btn.copied {
            background-color: var(--success-color);
        }

        .donation-note {
            text-align: center;
            font-size: 0.85rem;
            color: var(--text-tertiary);
            margin-top: 0.75rem;
            font-style: italic;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                align-items: flex-start;
            }

            .theme-toggle {
                flex-wrap: wrap;
                width: 100%;
            }

            .theme-toggle-btn span:not(.theme-icon) {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <h1>üñ•Ô∏è Machinist MD8 BIOS Wiki</h1>
                <p>Documenta√ß√£o completa de todas as op√ß√µes da BIOS</p>
            </div>
            <div class="theme-toggle">
                <button class="theme-toggle-btn donation-btn" id="donationBtn" title="Apoie este projeto">
                    <span class="theme-icon">üíù</span>
                    <span>Apoiar</span>
                </button>
                <button class="theme-toggle-btn" id="promptTemplateBtn" title="Editar template da pergunta padr√£o">
                    <span class="theme-icon">‚úèÔ∏è</span>
                    <span>Editar pergunta feita para a IA</span>
                </button>
                <button class="theme-toggle-btn" id="themeToggle" title="Alternar tema">
                    <span class="theme-icon" id="themeIcon">üåô</span>
                    <span id="themeLabel">Tema Escuro</span>
                </button>
            </div>
        </div>

        <!-- Breadcrumbs -->
        <nav class="breadcrumbs" id="breadcrumbs">
            <a href="#" onclick="filterByMenu('all'); return false;">In√≠cio</a>
        </nav>

        <!-- Filters -->
        <div class="filters">
            <div class="filter-group">
                <label>Menu</label>
                <select id="menuFilter">
                    <option value="all">Todos</option>
                    <option value="Main">Main</option>
                    <option value="Advanced">Advanced</option>
                    <option value="IntelRCSetup">IntelRCSetup</option>
                    <option value="Security">Security</option>
                    <option value="Boot">Boot</option>
                    <option value="Save & Exit">Save & Exit</option>
                </select>
            </div>
            <div class="filter-group">
                <label>Buscar op√ß√£o</label>
                <input type="text" id="searchFilter" placeholder="Digite o nome da op√ß√£o...">
            </div>
            <div class="filter-group">
                <label>Risco</label>
                <select id="riskFilter">
                    <option value="all">Todos</option>
                    <option value="none">Nenhum</option>
                    <option value="low">Baixo</option>
                    <option value="high">Alto</option>
                </select>
            </div>
        </div>

        <!-- Table -->
        <div class="table-wrapper">
            <table>
                <thead>
                    <tr>
                        <th>Sess√£o / Op√ß√£o</th>
                        <th>Valor Padr√£o</th>
                        <th>Descri√ß√£o</th>
                        <th>Risco</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <!-- Populated by JavaScript -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Donation Modal -->
    <div class="donation-modal" id="donationModal">
        <div class="donation-content">
            <button class="donation-close" onclick="closeDonationModal()">√ó</button>
            
            <div class="donation-header">
                <h2>üíù Apoie este projeto</h2>
                <p>Ajude a cobrir os custos de IA para gerar e manter esta documenta√ß√£o completa</p>
            </div>

            <div class="donation-method">
                <h3><span class="donation-method-icon">üáßüá∑</span> PIX</h3>
                <div class="donation-qr" style="text-align: center; margin-bottom: 0.75rem;">
                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=160x160&data=a8c39b1e-00e3-4e68-96de-71d4c488f338" 
                         alt="QR Code PIX" 
                         style="border-radius: 8px; border: 3px solid var(--bg-primary); max-width: 160px;">
                </div>
                <div class="donation-label">Chave PIX:</div>
                <div class="donation-code" id="pixCode" onclick="copyToClipboard('pixCode', 'pixCopyBtn')">
                    a8c39b1e-00e3-4e68-96de-71d4c488f338
                </div>
                <button class="copy-btn" id="pixCopyBtn" onclick="copyToClipboard('pixCode', 'pixCopyBtn')">
                    üìã Copiar chave PIX
                </button>
                <button class="copy-btn" onclick="openPixApp()" style="margin-top: 0.5rem; background-color: var(--success-color);">
                    üì± Abrir app PIX
                </button>
            </div>

            <div class="donation-method">
                <h3><span class="donation-method-icon">‚Çø</span> Bitcoin</h3>
                <div class="donation-qr" style="text-align: center; margin-bottom: 0.75rem;">
                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=160x160&data=bitcoin:33RDVhf2DrhSmGk4huDo6xbbcY5hdP3caJ" 
                         alt="QR Code Bitcoin" 
                         style="border-radius: 8px; border: 3px solid var(--bg-primary); max-width: 160px;">
                </div>
                <div class="donation-label">Endere√ßo BTC:</div>
                <div class="donation-code" id="btcCode" onclick="copyToClipboard('btcCode', 'btcCopyBtn')">
                    33RDVhf2DrhSmGk4huDo6xbbcY5hdP3caJ
                </div>
                <button class="copy-btn" id="btcCopyBtn" onclick="copyToClipboard('btcCode', 'btcCopyBtn')">
                    üìã Copiar endere√ßo Bitcoin
                </button>
                <button class="copy-btn" onclick="openBitcoinApp()" style="margin-top: 0.5rem; background-color: var(--warning-color); color: #000;">
                    üì± Abrir carteira Bitcoin
                </button>
            </div>

            <div class="donation-note">
                üíô Qualquer valor √© apreciado e ajuda a manter o projeto ativo!
            </div>
        </div>
    </div>

    <script>
        // BIOS Options Data (will be populated from JSON)
        let biosOptions = [];
        let filteredOptions = [];

        // Current filters
        let currentFilters = {
            menu: 'all',
            search: '',
            risk: 'all'
        };

        // Load BIOS options from JSON
        async function loadBIOSOptions() {
            try {
                // Carregar √≠ndice de arquivos
                const indexResponse = await fetch('data/index.json');
                if (!indexResponse.ok) {
                    throw new Error('Erro ao carregar index.json');
                }
                
                const index = await indexResponse.json();
                
                // Carregar todos os arquivos de dados em paralelo
                const dataPromises = index.dataFiles.map(fileInfo => 
                    fetch(`data/${fileInfo.file}`).then(r => r.json())
                );
                
                const dataArrays = await Promise.all(dataPromises);
                
                // Mesclar todos os arrays em um √∫nico array
                biosOptions = dataArrays.flat();
                filteredOptions = [...biosOptions];
                
                renderTable();
            } catch (error) {
                console.error('Erro ao carregar op√ß√µes:', error);
                // Fallback: usar dados de exemplo
                biosOptions = getExampleData();
                filteredOptions = [...biosOptions];
                renderTable();
            }
        }

        // Example data (fallback)
        function getExampleData() {
            return [
                {
                    menu: 'Advanced',
                    submenu: 'ACPI Settings',
                    option: 'Enable ACPI Auto Configuration',
                    defaultValue: '[Disabled]',
                    description: 'Permite que a BIOS configure automaticamente as tabelas ACPI do sistema operacional.',
                    risk: 'none'
                },
                {
                    menu: 'Advanced',
                    submenu: 'ACPI Settings',
                    option: 'Enable Hibernation',
                    defaultValue: '[Enabled]',
                    description: 'Controla se o sistema operacional pode usar o modo de hiberna√ß√£o (S4). Requer espa√ßo em disco igual ao tamanho da RAM instalada.',
                    risk: 'low'
                },
                {
                    menu: 'Advanced',
                    submenu: 'PCI Subsystem Settings',
                    option: 'Above 4G Decoding',
                    defaultValue: '[Disabled]',
                    description: 'Permite que dispositivos PCIe acessem mais de 4GB de mem√≥ria. Necess√°rio para GPUs modernas com muita VRAM.',
                    risk: 'low'
                },
                {
                    menu: 'Advanced',
                    submenu: 'USB Configuration',
                    option: 'XHCI Hand-off',
                    defaultValue: '[Enabled]',
                    description: 'Transfere controle do USB 3.0 do BIOS para o sistema operacional. Recomendado: Enabled para Windows 10/11 e Linux moderno.',
                    risk: 'none'
                },
                {
                    menu: 'IntelRCSetup',
                    submenu: 'Processor Configuration',
                    option: 'Hyper-Threading [ALL]',
                    defaultValue: '[Enable]',
                    description: 'Habilita Hyper-Threading em todos os cores do processador. Melhora performance em aplica√ß√µes multi-threaded.',
                    risk: 'none'
                },
                {
                    menu: 'IntelRCSetup',
                    submenu: 'Memory Configuration',
                    option: 'Memory Frequency',
                    defaultValue: '[Auto]',
                    description: 'Define a frequ√™ncia de opera√ß√£o da mem√≥ria RAM. Alterar manualmente pode causar instabilidade se n√£o compat√≠vel com o hardware.',
                    risk: 'high'
                }
            ];
        }

        // Render table
        function renderTable() {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';

            filteredOptions.forEach((option, index) => {
                const tr = document.createElement('tr');
                tr.dataset.menu = option.menu;
                tr.dataset.risk = option.risk;
                tr.dataset.option = option.option.toLowerCase();

                const menuPath = option.submenu 
                    ? `${option.menu} <span class="separator">‚Ä∫</span> ${option.submenu}`
                    : option.menu;

                // Build risk cell HTML
                let riskHtml = `<span class="risk-badge risk-${option.risk || 'none'}">${getRiskLabel(option.risk)}</span>`;
                if (option.riskReason) {
                    riskHtml += `<div class="risk-reason">${option.riskReason}</div>`;
                }

                tr.innerHTML = `
                    <td>
                        <div class="menu-path">${menuPath}</div>
                        <div class="option-name">${option.option}</div>
                    </td>
                    <td>
                        <span class="default-value">${option.defaultValue || 'N/A'}</span>
                    </td>
                    <td>
                        <div class="description">${option.description || 'Sem descri√ß√£o dispon√≠vel.'}</div>
                    </td>
                    <td>
                        ${riskHtml}
                    </td>
                    <td>
                        <button class="ai-btn" data-option="${escapeHtml(option.option)}" data-menu-path="${escapeHtml(menuPath)}" data-default-value="${escapeHtml(option.defaultValue || 'N/A')}">
                            üîç‚ú® IA
                        </button>
                    </td>
                `;

                // Add event listener to button
                const button = tr.querySelector('.ai-btn');
                button.addEventListener('click', function() {
                    const optionName = this.dataset.option;
                    const menuPathValue = this.dataset.menuPath;
                    const defaultValue = this.dataset.defaultValue;
                    openGoogleAIDirectly(optionName, menuPathValue, defaultValue);
                });

                tbody.appendChild(tr);
            });
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function getRiskLabel(risk) {
            const labels = {
                'none': 'Nenhum',
                'low': 'Baixo',
                'high': 'Alto'
            };
            return labels[risk] || 'Nenhum';
        }

        // Filter functions
        function applyFilters() {
            filteredOptions = biosOptions.filter(option => {
                // Menu filter
                if (currentFilters.menu !== 'all' && option.menu !== currentFilters.menu) {
                    return false;
                }

                // Search filter
                if (currentFilters.search) {
                    const searchLower = currentFilters.search.toLowerCase();
                    const searchText = `${option.menu} ${option.submenu || ''} ${option.option}`.toLowerCase();
                    if (!searchText.includes(searchLower)) {
                        return false;
                    }
                }

                // Risk filter
                if (currentFilters.risk !== 'all' && option.risk !== currentFilters.risk) {
                    return false;
                }

                return true;
            });

            renderTable();
            updateBreadcrumbs();
        }

        function filterByMenu(menu) {
            currentFilters.menu = menu;
            document.getElementById('menuFilter').value = menu;
            applyFilters();
        }

        // Event listeners
        document.getElementById('menuFilter').addEventListener('change', (e) => {
            currentFilters.menu = e.target.value;
            applyFilters();
        });

        document.getElementById('searchFilter').addEventListener('input', (e) => {
            currentFilters.search = e.target.value;
            applyFilters();
        });

        document.getElementById('riskFilter').addEventListener('change', (e) => {
            currentFilters.risk = e.target.value;
            applyFilters();
        });

        // Breadcrumbs
        function updateBreadcrumbs() {
            const breadcrumbs = document.getElementById('breadcrumbs');
            let html = '<a href="#" onclick="filterByMenu(\'all\'); return false;">In√≠cio</a>';

            if (currentFilters.menu !== 'all') {
                html += ` <span class="separator">‚Ä∫</span> <span>${currentFilters.menu}</span>`;
            }

            breadcrumbs.innerHTML = html;
        }

        // Google AI - Popup direto
        
        // Template padr√£o de pergunta
        let promptTemplate = 'Explique em 25 palavras o que √© a op√ß√£o "{option}" na BIOS da placa m√£e Machinist MD8.';

        function openGoogleAIDirectly(optionName, menuPath, defaultValue) {
            // Gerar pergunta usando template
            const prompt = promptTemplate.replace('{option}', optionName)
                                        .replace('{menu}', menuPath)
                                        .replace('{default}', defaultValue);
            const encodedPrompt = encodeURIComponent(prompt);
            const url = `https://www.google.com/search?q=${encodedPrompt}&newwindow=1&udm=50`;
            
            // Detectar se √© dispositivo m√≥vel
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) 
                           || window.innerWidth <= 768;
            
            let width, height, features;
            
            if (isMobile) {
                // Em mobile: usar quase toda a tela
                width = Math.floor(screen.width * 0.95);
                height = Math.floor(screen.height * 0.95);
                
                features = [
                    `width=${width}`,
                    `height=${height}`,
                    'resizable=yes',
                    'scrollbars=yes',
                    'location=yes'
                ].join(',');
            } else {
                // Em desktop: 30% da largura, altura total
                width = Math.floor(screen.width * 0.3);
                height = screen.availHeight;
                
                // Largura m√≠nima de 400px
                if (width < 400) {
                    width = 400;
                }
                
                features = [
                    `width=${width}`,
                    `height=${height}`,
                    'resizable=yes',
                    'scrollbars=yes'
                ].join(',');
            }
            
            // Abrir janela popup
            const popup = window.open(url, 'GoogleSearchAI', features);
            
            if (popup) {
                popup.focus();
            } else {
                // Popup bloqueada, abrir em nova aba
                window.open(url, '_blank', 'noopener,noreferrer');
            }
        }


        // Theme management
        function initTheme() {
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            let theme;
            if (savedTheme) {
                // Usar tema salvo
                theme = savedTheme;
            } else if (prefersDark) {
                // Usar tema escuro se o sistema preferir
                theme = 'dark';
            } else {
                // Usar tema claro por padr√£o
                theme = 'light';
            }
            
            setTheme(theme);
        }

        function setTheme(theme) {
            const html = document.documentElement;
            const themeIcon = document.getElementById('themeIcon');
            const themeLabel = document.getElementById('themeLabel');
            
            if (theme === 'light') {
                html.setAttribute('data-theme', 'light');
                themeIcon.textContent = '‚òÄÔ∏è';
                themeLabel.textContent = 'Tema Claro';
            } else {
                html.removeAttribute('data-theme');
                themeIcon.textContent = 'üåô';
                themeLabel.textContent = 'Tema Escuro';
            }
            
            localStorage.setItem('theme', theme);
        }

        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme') === 'light' ? 'light' : 'dark';
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            setTheme(newTheme);
        }

        // Event listener para bot√£o de tema
        document.getElementById('themeToggle').addEventListener('click', toggleTheme);

        // Detectar mudan√ßa de tema do sistema
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
            if (!localStorage.getItem('theme')) {
                setTheme(e.matches ? 'dark' : 'light');
            }
        });

        // Prompt template management
        function loadPromptTemplate() {
            const saved = localStorage.getItem('promptTemplate');
            if (saved) {
                promptTemplate = saved;
            }
        }

        function editPromptTemplate() {
            const currentTemplate = promptTemplate;
            const newTemplate = prompt(
                'Edite o template da pergunta para a IA:\n\n' +
                'Vari√°veis dispon√≠veis:\n' +
                '{option} - Nome da op√ß√£o\n' +
                '{menu} - Caminho do menu\n' +
                '{default} - Valor padr√£o\n\n' +
                'Template atual:',
                currentTemplate
            );

            if (newTemplate !== null && newTemplate.trim() !== '') {
                promptTemplate = newTemplate.trim();
                localStorage.setItem('promptTemplate', promptTemplate);
                alert('Template atualizado com sucesso!');
            }
        }

        // Event listener para bot√£o de editar template
        document.getElementById('promptTemplateBtn').addEventListener('click', editPromptTemplate);

        // Donation modal
        function openDonationModal() {
            document.getElementById('donationModal').classList.add('show');
        }

        function closeDonationModal() {
            document.getElementById('donationModal').classList.remove('show');
        }

        function copyToClipboard(codeId, btnId) {
            const codeElement = document.getElementById(codeId);
            const btnElement = document.getElementById(btnId);
            const text = codeElement.textContent.trim();

            navigator.clipboard.writeText(text).then(() => {
                // Feedback visual
                const originalText = btnElement.textContent;
                btnElement.textContent = '‚úÖ Copiado!';
                btnElement.classList.add('copied');

                setTimeout(() => {
                    btnElement.textContent = originalText;
                    btnElement.classList.remove('copied');
                }, 2000);
            }).catch(err => {
                alert('Erro ao copiar. Selecione manualmente o texto.');
            });
        }

        function openPixApp() {
            const pixKey = 'a8c39b1e-00e3-4e68-96de-71d4c488f338';
            
            // Tentar abrir app de banco via deep link
            // Formato: pix://chave ou intent Android
            const isMobile = /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
            
            if (isMobile) {
                // Tentar deep link PIX (alguns apps suportam)
                window.location.href = `pix://${pixKey}`;
                
                // Fallback: copiar chave
                setTimeout(() => {
                    copyToClipboard('pixCode', 'pixCopyBtn');
                    alert('Se o app n√£o abriu, a chave foi copiada. Cole no seu app de banco.');
                }, 1000);
            } else {
                // Desktop: apenas copiar
                copyToClipboard('pixCode', 'pixCopyBtn');
                alert('Chave PIX copiada! Cole no app do seu banco no celular.');
            }
        }

        function openBitcoinApp() {
            const btcAddress = '33RDVhf2DrhSmGk4huDo6xbbcY5hdP3caJ';
            
            // URI BIP21 para abrir carteira Bitcoin
            const bitcoinUri = `bitcoin:${btcAddress}`;
            
            // Tentar abrir carteira
            window.location.href = bitcoinUri;
            
            // Fallback: copiar endere√ßo
            setTimeout(() => {
                copyToClipboard('btcCode', 'btcCopyBtn');
            }, 1000);
        }

        // Event listener para bot√£o de doa√ß√£o
        document.getElementById('donationBtn').addEventListener('click', openDonationModal);

        // Fechar modal ao clicar fora
        document.getElementById('donationModal').addEventListener('click', (e) => {
            if (e.target.id === 'donationModal') {
                closeDonationModal();
            }
        });

        // Fechar modal com ESC
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                const modal = document.getElementById('donationModal');
                if (modal.classList.contains('show')) {
                    closeDonationModal();
                }
            }
        });

        // Initialize
        initTheme();
        loadPromptTemplate();
        loadBIOSOptions();
    </script>
</body>
</html>
